![demo](https://github.com/buravlev-arthur/cesium-angular-practics/assets/14940878/439e55a2-a65b-4734-bd49-00102b552565)

# Динамические лейблы

Демонстрация динамического добавления лейблов двумя способами:

- Через форму с параметрами лейбла;
- С помощью двойного клика мыши на карте.

Демо: [http://188.225.84.218](http://188.225.84.218/)

## Компоненты

- `app-label`: компонента для отрисовки лейблов, принимающая набор параметров:

  - `position [number, number]`: массив со значениями css-свойств `top` и `left`;
  - `display`: css-значения `block` или `none`;
  - `backgroundColor`: HEX-формат цвета фона лейбла (по-умолчанию: `#FFFFFF`);
  - `fontColor`: HEX-формат цвета текста лейбла (по-умолчанию: `#000000`);
  - `text`: текст лейбла.

- `app-viewer`: отвечает за отображение карты Cesium и использует сервис `DrawLabels` для отрисовки и перерисовки лейблов.
  Включает в своём шаблоне две дочерние компоненты: `app-label` и `app-settings`.

- `app-settings`: предоставляет форму для конфигурации добавляемого лейбла на карту: цвет фона, цвет текста, долгота/широта, текст.

## Сервисы

`DrawLabelsService`: обеспечивает динамичную отрисовку/перерисовку лейблов на карте. Динамично определяет/обновляет слушатель события для перерисовки карты.
Основные методы сервиса:

- `drawLabels()` - добавление лейблов на карту (в виде экземпляров `Entity`) и навешивание события для перерисовки лейблов при изменении времени;
- `removeLabels()` - удаление всех лейблов с карты и удаление слушателя события для перерисовки лейблов;
- `fromDegress()` - перевод долготы/широты в координаты декартовой системы координат;
- `fromCartesian()` - перевод координат декартовой системы в долготу/широту;
- `normalizePickPosition()` - вычисляет и возвращает координаты трёхмерной декартовой системы на карте по координатам мыши.
